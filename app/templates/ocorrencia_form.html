{% extends "base.html" %}

{% block title %}
    {% if ocorrencia and ocorrencia.numero_ocorrencia %}
        Editar Ocorrência {{ ocorrencia.numero_ocorrencia }}
    {% else %}
        Nova Ocorrência
    {% endif %}
{% endblock %}

{% block content %}
<!-- Page Heading -->
<h1 class="h3 mb-4 text-gray-800">
    {% if ocorrencia and ocorrencia.numero_ocorrencia %}
        Editar Ocorrência
    {% else %}
        Nova Ocorrência
    {% endif %}
</h1>

<form method="POST" action="{{ url_for('main.nova_ocorrencia') if not ocorrencia else url_for('main.editar_ocorrencia', id=ocorrencia.id) }}" enctype="multipart/form-data">
    {{ form.hidden_tag() }}
    
    <!-- Linha 1: Número da Ocorrência (somente na edição) -->
    {% if ocorrencia and ocorrencia.numero_ocorrencia %}
    <div class="form-row">
        <div class="form-group col-md-4">
            <label for="numero_ocorrencia">Número da Ocorrência</label>
            <input type="text" class="form-control" id="numero_ocorrencia" name="numero_ocorrencia" value="{{ ocorrencia.numero_ocorrencia }}" readonly>
        </div>
    </div>
    {% endif %}
    
    <!-- Linha 2: Entidade e Contato -->
    <div class="form-row">
        <div class="form-group col-md-6">
            <label for="entidade">Entidade</label>
            {{ form.entidade(class_="form-control") }}
        </div>
        <div class="form-group col-md-6">
            <label for="contato">Contato</label>
            {{ form.contato(class_="form-control", rows=1) }}
        </div>
    </div>
    
    <!-- Linha 3: Prioridade e Tipo -->
    <div class="form-row">
        <div class="form-group col-md-6">
            <label for="prioridade">Prioridade</label>
            {{ form.prioridade(class_="form-control") }}
        </div>
        <div class="form-group col-md-6">
            <label for="tipo">Tipo</label>
            {{ form.tipo(class_="form-control") }}
        </div>
    </div>
    
    <!-- Linha 4: Software e Módulo -->
    <div class="form-row">
        <div class="form-group col-md-6">
            <label for="software">Software</label>
            {{ form.software(class_="form-control") }}
        </div>
        <div class="form-group col-md-6">
            <label for="modulo">Módulo</label>
            {{ form.modulo(class_="form-control") }}
        </div>
    </div>
    
    <!-- Linha 5: Descrição -->
    <div class="form-group">
        <label for="descricao">Descrição</label>
        {{ form.descricao(class_="form-control", rows=5) }}
    </div>
    
    <!-- Linha 6: Resolução -->
    <div class="form-group">
        <label for="resolucao">Resolução</label>
        {{ form.resolucao(class_="form-control", rows=5) }}
    </div>
    
    <!-- Linha 7: Anexo -->
    <div class="form-group">
        <label for="anexo">Anexar Arquivo</label>
        {{ form.anexo(class_="form-control-file") }}
    </div>
    
    <!-- Botão de Salvar -->
    <button type="submit" class="btn btn-primary">Salvar</button>
    <a href="{{ url_for('main.meus_atendimentos') }}" class="btn btn-secondary">Cancelar</a>
    
</form>
{% endblock %}
